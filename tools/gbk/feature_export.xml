<?xml version="1.0"?>
<tool id="edu.tamu.cpt.gbk.feature_export" name="GenBank Feature Export" version="1.2">
  <description>Export a subset of features from a GenBank file</description>
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <command detect_errors="aggressive"><![CDATA[
python $__tool_directory__/feature_export.py
$positional_1

#set repeat_var_2 = ' '.join(str($positional_2).split(','))
$repeat_var_2

$translate
--translation_table_id $translation_table_id
--n_bases_upstream $n_bases_upstream
--n_bases_downstream $n_bases_downstream
$strip_stops
$informative

> $default]]></command>
  <inputs>
    <param label="GenBank file" name="positional_1" type="data" format="genbank"/>
	<expand macro="gbk_feature_type" label="Tags to export" />
    <param label="Translate sequence" name="translate" type="boolean"
        truevalue="--translate" falsevalue=""/>
    <param label="Translation table ID"
        name="translation_table_id" type="integer" value="11" />
    <param label="Add N bases upstream to exported features" name="n_bases_upstream"
        type="integer" value="0"/>
    <param label="Add N bases downstream to exported features"
        name="n_bases_downstream" type="integer" value="0"/>
    <param checked="true" label="Remove stop codons" name="strip_stops"
        type="boolean" truevalue="--strip_stops" falsevalue=""/>
    <param checked="true" label="Add product name to defline (for blast)" name="informative"
        type="boolean" truevalue="--informative" falsevalue=""/>
  </inputs>
  <outputs>
    <data format="fasta" name="default" label="$positional_2 exported from $positional_1.name"/>
  </outputs>
  <tests>
      <test>
          <param name="positional_1" value="related.gbk" />
          <param name="positional_2" value="CDS" />
          <param name="translate" value="True" />
          <output name="default" file="related.cds.fa" />
      </test>
  </tests>
  <help><![CDATA[
**What it does**

Exports features from a GenBank file.
      ]]></help>
</tool>
