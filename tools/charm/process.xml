<tool id="edu.tamu.cpt.charm.process" name="Pre-process gff files" version="1.0">
    <description>generally for those from NCBI/EBI</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <stdio>
        <exit_code level="fatal" range="1:"/>
    </stdio>
    <version_command>python process.py --version</version_command>
    <command interpreter="python"><![CDATA[process.py
$gff
--organism "$organism"
--source "$source"

#if $feature_prefix and $feature_prefix is not None:
--feature_prefix "$source.$feature_prefix"
#end if

> $default]]></command>
    <inputs>
        <expand macro="input_gff3" />
        <param area="false" help="(--organism)" label="Organism" name="organism" type="text"/>
        <param area="false" help="(--source)" label="Adjust source value" name="source" type="text"/>
        <param area="false" help="(--feature_prefix)" label="adjust source value" name="feature_prefix" type="text"/>
    </inputs>
    <outputs>
        <expand macro="output_gff3" />
    </outputs>
    <help><![CDATA[
**What it does**

This script pre-processes GFF data from NCBI/EMBL to remove some specific crap that they do to the GFF files, for example:

-    fixes Derives_from to Parent relationships
-    adjusts name/parent/ID to include new prefixes
-    fixes the "genome" feature to use an acceptable type

            ]]></help>
</tool>

