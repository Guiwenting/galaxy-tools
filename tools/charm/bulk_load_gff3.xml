<tool id="edu.tamu.cpt.charm.chado.bulk_load_gff3" name="Load GFF3" version="0.1.0">
    <description>into the Chado Database.</description>
    <requirements>
    </requirements>
    <command detect_errors="aggressive"><![CDATA[
gmod_bulk_load_gff3.pl
--gfffile $gfffile

#if $fastafile:
--fastafile $fastafile
#end if

--organism $organism
--dbprofile $dbprofile

$analysis
$nosequence
$noexon
$no_target_syn
$unique_target
$delete
$fp_cv
$noaddfpcv
$allow_external_parent

> $output
    ]]></command>
    <inputs>
        <param name="gfffile" format="gff,gff3" type="data" label="GFF3 File" />
        <param name="fastafile" format="fasta" type="data" label="Fasta File" optional="True"/>
        <param name="organism" type="text" label="Organism" />

        <param
            name="analysis"
            type="boolean"
            truevalue="--analysis"
            falsevalue=""
            label="The GFF data is from computational analysis"
            />

        <param
            name="nosequence"
            type="boolean"
            truevalue="--nosequence"
            falsevalue=""
            label="Don't load sequence even if it is in the file"
            />

        <param
            name="noexon"
            type="boolean"
            truevalue="--noexon"
            falsevalue=""
            label="Don't convert CDS features to exons (but still create polypeptide features)"
            help="but still create polypeptide features"
            />

        <param
            name="no_target_syn"
            type="boolean"
            truevalue="--no_target_syn"
            falsevalue=""
            label="Don't add targetId in synonyms"
            help="By default, the loader adds the targetId in the synonyms list of the feature. This flag desactivate this."
            />

        <param
            name="unique_target"
            type="boolean"
            truevalue="--unique_target"
            falsevalue=""
            label="Trust the unicity of the target IDs."
            help="IDs are case sensitive. By default, the uniquename of a new target will be 'TargetId_PrimaryKey'. With this flag, it will be 'TargetId'. Furthermore, the Name of the created target will be its TargetId, instead of the feature's Name."
            />

        <param
            name="delete"
            type="boolean"
            truevalue="--delete_i_really_mean_it"
            falsevalue=""
            label="Delete features"
            help="Instead of inserting features into the database, use the GFF lines to delete features as though the CRUD=delete-all option were set on all lines (see 'Deletes and updates via GFF below')."
            />

        <param
            name="fp_cv"
            type="text"
            default="feature_property"
            label="Name of feature property CV"
            help="Name of the feature property controlled vocabulary (defaults to 'feature_property')."
            />

        <!-- TODO: change to conditional -->
        <param
            name="noaddfpcv"
            type="boolean"
            truevalue="--noaddfpcv"
            falsevalue=""
            label="Don't add feature_property CV Terms"
            help="By default, the loader adds GFF attribute types as new feature_property cv terms when missing. This flag deactivates it."
            />

        <param
            name="allow_external_parent"
            type="boolean"
            truevalue="--allow_external_parent"
            falsevalue=""
            label="Allow Parent tags to refer to IDs outside the current GFF file"
            />

        <param name="dbprofile" type="text" label="Database" />
    </inputs>
    <outputs>
        <data format="txt" name="output" label="Addition of organisms to $dbprofile" />
    </outputs>
    <help><![CDATA[
Load GFF3 files into Chado Database.
    ]]></help>
</tool>
