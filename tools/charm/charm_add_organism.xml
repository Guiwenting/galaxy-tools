<tool id="edu.tamu.cpt.charm.chado.add_organism" name="Add Organism" version="0.1.0">
    <description>creates new organism record in the Chado Database.</description>
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="3:" />
    </stdio>
    <command><![CDATA[
#if $source.source_select == "table":
    cat "$source.table" |
    awk -v db="${dbprofile}"
    '(NR>1){print "gmod_add_organism.pl --common_name \""$1"\" --genus \""$2"\" --species \""$3"\" --abbreviation \""$4"\" --comment \""$5"\"  --dbprofile \""db"\""}'
    > $output
#else
    gmod_add_organism.pl
    --common_name "${source.common_name}"
    --genus "${source.genus}"
    --species "${source.species}"
    --abbreviation "${source.abbreviation}"
    --comment "${source.comment}"
    --dbprofile "${dbprofile}"
    > $output
#end if

    ]]></command>
    <inputs>
        <conditional name="source">
            <param name="source_select" type="select" label="Source of organisms to add">
                <option value="table">From file (table)</option>
                <option value="direct">Direct entry</option>
            </param>
            <when value="table">
                <param name="table" format="tabular" type="data" label="Table of organisms" />
            </when>
            <when value="direct">
                <param name="genus" type="text" label="Genus" />
                <param name="species" type="text" label="Species" />
                <param name="common_name" type="text" label="Common Name" />
                <param name="abbreviation" type="text" label="Abbreviation" />
                <param name="comment" type="text" label="Comment" />
            </when>
        </conditional>
        <param name="dbprofile" type="text" label="Database" />
    </inputs>
    <outputs>
        <data format="txt" name="output" label="Addition of organisms to $dbprofile" />
    </outputs>
    <help><![CDATA[
Add an organism, or organisms, to a Chado database
    ]]></help>
</tool>
