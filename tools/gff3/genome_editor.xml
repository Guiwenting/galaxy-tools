<?xml version="1.0"?>
<tool id="edu.tamu.cpt.gff3.genome_editor" name="Genome Editor" version="2.1">
  <description>allows you to re-arrange a genome</description>
  <macros>
    <import>macros.xml</import>
    <import>cpt-macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <command detect_errors="aggressive"><![CDATA[
@GENOME_SELECTOR_PRE@
python $__tool_directory__/genome_editor.py

@GENOME_SELECTOR@
@INPUT_GFF@
"$new_id"

--out_fasta "$out_fasta"
--out_gff3 "$out_gff3"
--out_simpleChain "$out_chain"
--changes
#for change in $changes:
	${change.start},${change.end},${change.revcom}
#end for


]]></command>
  <inputs>
      <expand macro="input/gff3+fasta" />
      <param label="New ID" name="new_id" type="text" help="New ID for the sequence to uniquely identify it from the previous build of the sequence. E.g. append Miro could become Miro.2 or Miro.v2 "/>
      <repeat name="changes" title="Sequence Component Selections">
        <param label="Start" name="start" type="integer" min="0"/>
        <param label="End" name="end" type="integer" min="0"/>
        <param label="Reverse + Complement" name="revcom" type="boolean" truevalue="-" falsevalue="+" />
      </repeat>
  </inputs>
  <outputs>
    <data format="gff3" name="out_gff3"/>
    <data format="fasta" name="out_fasta"/>
    <data format="tabular" name="out_chain"/>
  </outputs>
  <tests>
  </tests>
  <help><![CDATA[
**What it does**

Allows for "editing" of a genome. Selecting regions of a genome and stitching them together. E.g. for an input sequence like:

	>Miro
	TTAGT AATGG CTAAA

We could enter sequence component selections like:

- start: 1, end: 10, strand: +
- start: 6, end: 10, strand: +

and we would see:

	>Miro.v2
	TTAGT AATGG AATGG

(Spaces added for clarity.)

Or, if we chose to reverse + complement the last section:

- start: 1, end: 10, strand: +
- start: 6, end: 10, strand: -

	>Miro.v2
	TTAGT AATGG CCATT

]]></help>
  <expand macro="citations" />
</tool>
