<?xml version="1.0"?>
<tool id="edu.tamu.cpt2.phage.annotation_validator" name="Phage QC" version="1.3">
    <description>validate phage annotations</description>
    <macros>
      <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="stdio"/>
    <version_command>python phage_annotation_validator.py --version</version_command>
    <command><![CDATA[
@GENOME_SELECTOR_PRE@

python $__tool_directory__/phage_annotation_validator.py
$gff3_data
@GENOME_SELECTOR@

--sd_min $sd_min
--sd_max $sd_max
--gap_dist $gap_dist
--overlap_dist $overlap_dist
--min_gene_length $min_gene
--reportTemplateName $report_format
--gff3 $gff3

> $output]]></command>
    <inputs>
        <expand macro="gff3_input" />
        <expand macro="genome_selector" />

        <param label="Minimum distance for SDs (bp)" name="sd_min" type="integer" value="5" />
        <param label="Maximum distance for SDs (bp)" name="sd_max" type="integer" value="15" />

        <param label="Minimum distance to call a gap (bp)" name="gap_dist" type="integer" value="45" />
        <param label="Maximum overlap distance to permit (bp)" name="overlap_dist" type="integer" value="15" />
        <param label="Minimum length of naively called ORFs in gaps (in AAs)" name="min_gene" type="integer" value="25" />

        <param label="Report Format" type="select" name="report_format">
            <option value="phage_annotation_validator.html" selected="True">Full Report</option>
            <option value="phageqc_genomea_report.html">GenomeA Report</option>
            <option value="phageqc_464_report.html">464 Report</option>
        </param>
    </inputs>
    <outputs>
      <data format="html" name="output"/>
      <data format="gff3" name="gff3" label="Phage QC annotation track"/>
    </outputs>
    <help><![CDATA[
**What it does**

Run CPT's Phage Annotation Validator validating the following properties:

-  Missing RBSs
-  Excessive Gaps
-  Excessive Overlaps
-  Morons
-  Weird Start Codons

        ]]></help>
</tool>
