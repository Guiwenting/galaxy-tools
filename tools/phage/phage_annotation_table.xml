<?xml version="1.0"?>
<tool id="edu.tamu.cpt2.phage.annotation_table" name="Annotation Table" version="2.9">
    <description>from gff3 formatted datasets</description>
    <macros>
      <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="aggressive"><![CDATA[
@GENOME_SELECTOR_PRE@

python $__tool_directory__/phage_annotation_table.py
$gff3_data
@GENOME_SELECTOR@

--reportTemplateName "$report_format"
--annotationTableCols "$cols"

> $output]]></command>
    <inputs>
        <expand macro="gff3_input" />
        <expand macro="genome_selector" />
        <param label="Columns" type="select" name="cols" multiple="True">
            <option value="rid" selcted="true">Record ID</option>
            <option value="id" selcted="true">ID</option>
            <option value="name" selcted="true">Name</option>

            <option value="location" selcted="true">Location</option>
            <option value="start" selcted="true">Feature Start</option>
            <option value="end" selcted="true">Feature End</option>
            <option value="strand" selcted="true">Strand</option>
            <option value="length" selcted="true">Length</option>

            <option value="sd_seq" selcted="true">SD sequence</option>
            <option value="sd_spacing" selcted="true">SD spacing</option>
            <option value="start_codon" selcted="true">Start codon</option>
            <option value="stop_codon" selcted="true">Stop codon</option>

            <option value="ig_dist" selcted="true">Distance to next upstream feature</option>
            <option value="upstream_feature__name" selcted="true">Name of upstream feature</option>

            <option value="owner" selcted="true">Owner</option>
            <option value="date_created" selcted="true">Date created</option>
            <option value="date_last_modified" selcted="true">Date last modified</option>

            <option value="notes" selcted="true">Notes</option>
            <option value="description" selcted="true">Description</option>
            <option value="product" selcted="true">Product</option>
            <option value="dbxrefs" selcted="true">DBxrefs</option>
        </param>
        <param label="Report Format" type="select" name="report_format">
            <option value="phageqc_report_annotation_table.html" selected="true">HTML Table</option>
            <option value="phageqc_report_annotation_table.tsv">Tabular (Excel Compatible) Table</option>
        </param>
    </inputs>
    <outputs>
      <data format="html" name="output">
          <change_format>
            <when format="tabular" input="report_format" value="phageqc_report_annotation_table.tsv"/>
          </change_format>
      </data>
    </outputs>
    <help><![CDATA[
Generate an "annotation table" of a genome, with user-configurable data columns
]]></help>
</tool>
