<?xml version="1.0"?>
<tool id="edu.tamu.cpt2.phage.annotation_table" name="Annotation Table" version="2.6.1">
    <description>from gff3 formatted datasets</description>
    <macros>
      <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="stdio"/>
    <command><![CDATA[
@GENOME_SELECTOR_PRE@

python $__tool_directory__/phage_annotation_validator.py
$gff3_data
@GENOME_SELECTOR@

--reportTemplateName "$report_format"
--user_email $__user_email__
--annotationTableCols "$cols"

> $output]]></command>
    <inputs>
        <expand macro="gff3_input" />
        <expand macro="genome_selector" />
        <param label="Columns" type="select" name="cols" multiple="True">
            <option value="id">ID</option>
            <option value="name">Name</option>
            <option value="location">Location</option>
            <option value="strand">Strand</option>
            <option value="length">Length</option>

            <option value="sd_seq">SD sequence</option>
            <option value="sd_spacing">SD spacing</option>
            <option value="start_codon">Start codon</option>
            <option value="stop_codon">Stop codon</option>

            <option value="ig_dist">Distance to next upstream feature</option>
            <option value="upstream_feature__name">Name of upstream feature</option>

            <option value="owner">Owner</option>
            <option value="date_created">Date created</option>
            <option value="date_last_modified">Date last modified</option>

            <option value="notes">Notes</option>
            <option value="description">Description</option>
            <option value="product">Product</option>
            <option value="dbxrefs">DBxrefs</option>
        </param>
        <param label="Report Format" type="select" name="report_format">
            <option value="phageqc_report_annotation_table.html" selected="True">HTML Table</option>
            <option value="phageqc_report_annotation_table.tsv">Tabular (Excel Compatible) Table</option>
        </param>
    </inputs>
    <outputs>
      <data format="html" name="output">
          <change_format>
            <when format="tabular" input="report_format" value="phageqc_report_annotation_table.tsv"/>
          </change_format>
      </data>
    </outputs>
    <help><![CDATA[
Generate an "annotation table" of a genome, with user-configurable data columns
]]></help>
</tool>
