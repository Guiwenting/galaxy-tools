<?xml version="1.0"?>
<tool id="edu.tamu.cpt.gff3.aa_stats" name="Codon Usage" version="1.0">
  <description>summarise codon usage from a GFF3 annotation of a genome</description>
  <stdio>
    <exit_code level="fatal" range="1:"/>
  </stdio>
  <version_command>python aa_stats.py --version</version_command>
  <command interpreter="python"><![CDATA[
#if $reference_genome.source == 'history':
    ln -s $reference_genome.genome_fasta genomeref.fa &&
#end if

aa_stats.py

#if $reference_genome.source == 'cached':
    "${reference_genome.fasta_indexes.fields.path}"
#elif $reference_genome.source == 'history':
    genomeref.fa
#end if

$positional_2
> $default]]></command>
  <inputs>
      <conditional name="reference_genome">
          <param name="source" type="select" label="Reference Genome">
              <option value="cached">Locally Cached</option>
              <option value="history">From History</option>
          </param>
          <when value="cached">
            <param name="fasta_indexes" type="select" label="Source FASTA Sequence">
                <options from_data_table="all_fasta"/>
            </param>
        </when>
        <when value="history">
            <param name="genome_fasta" type="data" format="fasta" label="Source FASTA Sequence"/>
        </when>
    </conditional>
    <param label="GFF3 Annotations" name="positional_2" type="data" format="gff3"/>
  </inputs>
  <outputs>
    <data format="tabular" name="Codon Usage"/>
  </outputs>
  <help><![CDATA[
**What it does**

Codon Usage statistics
]]></help>
</tool>
